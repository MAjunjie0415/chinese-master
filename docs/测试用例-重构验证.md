# 重构后功能测试用例

## 测试目标
验证移除 Word Banks 后，所有功能统一到 Courses 体系，学习闭环完整。

## 自动化测试结果
✅ **所有自动化测试通过** (10/10)
- 数据库连接正常
- 所有表结构正确
- 查询逻辑验证通过

---

## 一、基础功能测试

### 1.1 数据库连接测试
**测试步骤：**
1. 运行 `npm run dev` 启动开发服务器
2. 访问 `http://localhost:3000`
3. 检查浏览器控制台是否有数据库连接错误

**预期结果：**
- ✅ 页面正常加载
- ✅ 无数据库连接错误
- ✅ 首页显示正常

---

### 1.2 课程系统测试

#### 测试1.2.1：课程列表页
**测试步骤：**
1. 访问 `http://localhost:3000/courses`
2. 检查页面是否正常加载
3. 检查是否有"Explore"和"My Courses"两个Tab
4. 检查课程卡片是否显示

**预期结果：**
- ✅ 页面正常加载
- ✅ 显示两个Tab切换
- ✅ 课程卡片显示课程信息（标题、分类、单词数等）

#### 测试1.2.2：课程详情页
**测试步骤：**
1. 在课程列表页点击任意课程
2. 检查课程详情页是否正常加载
3. 检查是否显示课程描述、单词列表
4. 检查是否有"Start Course"或"Begin Learning"按钮

**预期结果：**
- ✅ 课程详情页正常加载
- ✅ 显示完整的课程信息
- ✅ 显示单词列表（汉字、拼音、英文）
- ✅ 按钮文字正确（未添加显示"Start Course"，已添加显示"Begin Learning"）

#### 测试1.2.3：添加课程
**测试步骤：**
1. 在课程详情页点击"Start Course →"
2. 检查是否成功添加到"我的课程"
3. 返回课程列表，切换到"My Courses"Tab
4. 检查课程是否出现在"我的课程"中

**预期结果：**
- ✅ 点击后成功添加课程
- ✅ 按钮文字变为"Begin Learning →"
- ✅ 在"My Courses"中可以看到该课程
- ✅ 显示课程进度（初始为0%）

---

## 二、练习模式测试

### 2.1 Picture Match 模式

#### 测试2.1.1：开始练习
**测试步骤：**
1. 在课程详情页点击"Begin Learning →"
2. 选择"Picture Match"模式
3. 检查练习页面是否正常加载
4. 检查是否显示汉字、拼音、选项

**预期结果：**
- ✅ 练习页面正常加载
- ✅ 显示计时器和进度条
- ✅ 显示当前单词（汉字、拼音）
- ✅ 显示4个选项（1个正确答案+3个干扰项）
- ✅ 自动播放发音

#### 测试2.1.2：答题流程
**测试步骤：**
1. 选择一个答案
2. 检查是否正确显示反馈（绿色=正确，红色=错误）
3. 等待1.5秒后自动下一题
4. 完成所有题目

**预期结果：**
- ✅ 选择后立即显示反馈
- ✅ 正确显示绿色背景和✓
- ✅ 错误显示红色背景和✗，并高亮正确答案
- ✅ 1.5秒后自动切换到下一题
- ✅ 进度条实时更新

#### 测试2.1.3：练习完成
**测试步骤：**
1. 完成所有题目后
2. 检查是否跳转到结果页
3. 检查结果页显示的内容

**预期结果：**
- ✅ 自动跳转到结果页
- ✅ 显示成绩统计（正确率、答对题数、用时）
- ✅ 显示鼓励语（根据正确率不同）
- ✅ **显示"Review Plan Created!"提示，说明X个单词已加入复习计划**
- ✅ 显示"Go to Review →"链接

---

### 2.2 Tone Practice 模式

#### 测试2.2.1：开始练习
**测试步骤：**
1. 在课程详情页点击"Begin Learning →"
2. 选择"Tone Training"模式
3. 检查练习页面是否正常加载

**预期结果：**
- ✅ 练习页面正常加载
- ✅ 显示播放按钮和声调选项
- ✅ 自动播放发音
- ✅ 显示4个声调选项（1-4声）

#### 测试2.2.2：答题流程
**测试步骤：**
1. 听发音，选择正确的声调
2. 检查反馈是否正确
3. 完成所有题目

**预期结果：**
- ✅ 选择后显示反馈
- ✅ 正确显示绿色，错误显示红色
- ✅ 2秒后自动下一题
- ✅ 可以重复播放发音

#### 测试2.2.3：练习完成
**测试步骤：**
1. 完成所有题目
2. 检查结果页

**预期结果：**
- ✅ 跳转到结果页
- ✅ 显示成绩和鼓励语
- ✅ **显示复习计划提示**

---

## 三、复习系统测试

### 3.1 Review 页面测试

#### 测试3.1.1：访问Review页面
**测试步骤：**
1. 完成至少一次练习（确保有单词加入复习计划）
2. 访问 `http://localhost:3000/review`
3. 检查页面是否正常加载

**预期结果：**
- ✅ 页面正常加载
- ✅ 显示待复习单词列表
- ✅ **每个单词显示课程来源标签**（如"📚 Business Negotiation Essentials"）

#### 测试3.1.2：复习流程
**测试步骤：**
1. 查看第一个单词（显示拼音和英文）
2. 点击"Show Answer"
3. 检查是否显示汉字和例句
4. 点击"Still Know"或"Forgot"
5. 检查是否自动切换到下一个单词

**预期结果：**
- ✅ 初始只显示拼音和英文
- ✅ 点击后显示汉字和例句
- ✅ 显示发音按钮
- ✅ 点击"Still Know"或"Forgot"后自动下一题
- ✅ 进度条实时更新

#### 测试3.1.3：复习完成
**测试步骤：**
1. 完成所有复习
2. 检查完成页面

**预期结果：**
- ✅ 显示"Review Complete!"
- ✅ 显示复习的单词数
- ✅ 显示"Learn More Words"按钮（跳转到/courses）
- ✅ 显示"Back to Home"按钮

---

### 3.2 首页复习提醒测试

#### 测试3.2.1：复习提醒显示
**测试步骤：**
1. 确保有待复习的单词（完成练习后）
2. 访问首页 `http://localhost:3000`
3. 检查是否显示复习提醒

**预期结果：**
- ✅ 登录用户显示复习提醒卡片
- ✅ 显示"🔥 X words waiting for review!"
- ✅ 显示"Review Now →"按钮
- ✅ 点击跳转到 `/review`

#### 测试3.2.2：无复习时
**测试步骤：**
1. 完成所有复习（或没有待复习单词）
2. 访问首页
3. 检查是否不显示复习提醒

**预期结果：**
- ✅ 不显示复习提醒卡片
- ✅ 只显示"Continue Learning"按钮

---

## 四、Profile页面测试

### 4.1 数据统计测试

#### 测试4.1.1：访问Profile页面
**测试步骤：**
1. 访问 `http://localhost:3000/profile`
2. 检查页面是否正常加载
3. 检查统计卡片是否显示

**预期结果：**
- ✅ 页面正常加载
- ✅ 显示用户信息卡片
- ✅ 显示"Learning Dashboard"标题

#### 测试4.1.2：统计数据显示
**测试步骤：**
1. 检查第一行统计卡片：
   - Total Words Learned（总学习单词数）
   - Mastered Words（已掌握单词数）
   - Reviews Today（今日待复习数）
2. 检查第二行统计卡片：
   - Enrolled Courses（进行中课程数）
   - Completed Courses（已完成课程数）
   - Practice Sessions（练习次数）

**预期结果：**
- ✅ 所有统计数据正确显示
- ✅ 数字与实际数据一致
- ✅ "Total Words Learned"可点击跳转到/courses
- ✅ "Reviews Today"可点击跳转到/review（如果有待复习）
- ✅ "Enrolled Courses"可点击跳转到/courses?tab=my-courses

#### 测试4.1.3：空状态测试
**测试步骤：**
1. 使用新用户（没有学习数据）
2. 访问Profile页面
3. 检查空状态提示

**预期结果：**
- ✅ 所有统计显示0
- ✅ 显示"Ready to start your learning journey?"提示
- ✅ 显示"Continue Learning"按钮

---

## 五、学习闭环完整性测试

### 5.1 完整学习流程测试

#### 测试5.1.1：从课程到复习的完整流程
**测试步骤：**
1. **选择课程**：访问 `/courses`，选择一个课程，点击"Start Course →"
2. **开始练习**：点击"Begin Learning →"，选择"Picture Match"
3. **完成练习**：完成所有题目，查看结果页
4. **检查复习计划**：结果页应显示"X个单词已加入复习计划"
5. **开始复习**：点击"Go to Review →"或访问 `/review`
6. **完成复习**：完成所有复习
7. **检查进度**：返回课程详情页，检查进度是否更新

**预期结果：**
- ✅ 每个步骤都能正常执行
- ✅ 数据正确传递和保存
- ✅ 课程进度正确更新
- ✅ 复习记录正确创建

#### 测试5.1.2：数据一致性测试
**测试步骤：**
1. 完成一次练习（假设10个单词，答对8个）
2. 检查数据库：
   - `practice_records` 表是否有记录
   - `user_progress` 表是否有10条记录（每个单词一条）
   - `user_courses` 表的 `progress` 是否更新
3. 访问Review页面，检查是否显示待复习单词

**预期结果：**
- ✅ `practice_records` 有1条记录（mode='picture-match'）
- ✅ `user_progress` 有10条记录（每个单词一条）
- ✅ `user_courses.progress` 已更新
- ✅ Review页面显示待复习单词（通过course_words关联）

---

## 六、边界情况测试

### 6.1 未登录用户测试

#### 测试6.1.1：访问保护页面
**测试步骤：**
1. 退出登录
2. 尝试访问 `/courses`、`/review`、`/profile`
3. 检查是否重定向到登录页

**预期结果：**
- ✅ 自动重定向到 `/login`
- ✅ 登录后能跳转回原页面

### 6.2 空数据测试

#### 测试6.2.1：没有课程数据
**测试步骤：**
1. 访问 `/courses`
2. 检查空状态显示

**预期结果：**
- ✅ 显示友好的空状态提示
- ✅ 不报错

#### 测试6.2.2：没有待复习单词
**测试步骤：**
1. 访问 `/review`（没有待复习单词时）
2. 检查空状态显示

**预期结果：**
- ✅ 显示"Great job! No reviews today!"
- ✅ 显示"Back to Home"按钮

---

## 七、性能测试

### 7.1 页面加载速度
**测试步骤：**
1. 打开浏览器开发者工具（Network标签）
2. 访问各个页面，记录加载时间
3. 检查是否有慢查询

**预期结果：**
- ✅ 首页加载 < 2秒
- ✅ 课程列表页加载 < 2秒
- ✅ Review页面加载 < 2秒
- ✅ Profile页面加载 < 2秒

### 7.2 数据库查询优化
**测试步骤：**
1. 检查Review查询是否使用了正确的JOIN
2. 检查是否有N+1查询问题

**预期结果：**
- ✅ 查询使用INNER JOIN，不是多次查询
- ✅ 查询性能良好

---

## 八、UI/UX测试

### 8.1 响应式设计
**测试步骤：**
1. 在不同设备上测试（桌面、平板、手机）
2. 检查布局是否适配

**预期结果：**
- ✅ 桌面端布局正常
- ✅ 移动端布局适配
- ✅ 按钮大小适合触摸操作

### 8.2 交互反馈
**测试步骤：**
1. 测试所有按钮的hover效果
2. 测试加载状态显示
3. 测试错误提示

**预期结果：**
- ✅ 按钮有hover效果
- ✅ 加载时显示loading状态
- ✅ 错误时显示友好的错误提示

---

## 九、回归测试

### 9.1 Word Banks功能已移除
**测试步骤：**
1. 检查导航栏是否还有"Word Banks"链接
2. 尝试访问 `/wordbanks`（如果路由还存在）
3. 检查首页是否还有Word Banks相关展示

**预期结果：**
- ✅ 导航栏没有"Word Banks"链接
- ✅ `/wordbanks` 路由不存在或重定向
- ✅ 首页没有Word Banks相关展示

### 9.2 所有入口指向Courses
**测试步骤：**
1. 检查首页"Continue Learning"按钮
2. 检查登录后的默认跳转
3. 检查Profile页面的"Continue Learning"按钮

**预期结果：**
- ✅ 所有入口都指向 `/courses`
- ✅ 没有指向 `/wordbanks` 的链接

---

## 十、关键验证点

### ✅ 必须验证的功能点

1. **练习完成后创建复习记录**
   - [ ] Picture Match完成后，`user_progress`表有记录
   - [ ] Tone Practice完成后，`user_progress`表有记录
   - [ ] 结果页显示"X个单词已加入复习计划"

2. **Review只显示Courses单词**
   - [ ] Review页面只显示来自Courses的单词
   - [ ] 每个单词显示课程来源标签
   - [ ] 查询逻辑使用JOIN course_words

3. **首页复习提醒**
   - [ ] 只统计来自Courses的待复习单词
   - [ ] 显示正确的数量
   - [ ] 点击跳转到Review页面

4. **Profile数据整合**
   - [ ] 显示所有统计数据
   - [ ] 数据准确无误
   - [ ] 可点击跳转到对应页面

5. **学习闭环完整**
   - [ ] 课程 → 练习 → 复习 → 进度更新
   - [ ] 数据正确传递
   - [ ] 无数据丢失

---

## 测试执行记录

### 测试环境
- 日期：_____________
- 测试人员：_____________
- 浏览器：_____________
- 数据库：Supabase

### 测试结果
- 通过：___ / ___
- 失败：___ / ___
- 阻塞：___ / ___

### 问题记录
1. 
2. 
3. 

---

## 快速测试清单

**5分钟快速验证：**
- [ ] 访问 `/courses`，添加一个课程
- [ ] 开始练习，完成Picture Match
- [ ] 检查结果页是否显示复习计划提示
- [ ] 访问 `/review`，检查是否显示待复习单词和课程来源
- [ ] 完成复习，检查是否正常
- [ ] 访问 `/profile`，检查统计数据

**如果以上都通过，基本功能正常！**

